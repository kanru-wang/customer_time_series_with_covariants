---
title: "customer_time_series_multivariate"
output: html_notebook
---

```{r}
library(readr)
library(forecast)
combined_clean <- read_csv("C:/Users/wangka3/Desktop/learning/R_exercise2/combined_clean.csv")
```

```{r}
train_data = combined_clean[1:15912, 5:58]
test_data = combined_clean[15913:17376, 5:58]
```

```{r}
model_cust = auto.arima(combined_clean$cust_168[1:15912], 
                        xreg = data.matrix(train_data))
```

```{r}
model_cust
```


```{r}
checkresiduals(model_cust)
```


```{r}
forecast_cust = forecast(model_cust, xreg = data.matrix(train_data))
(autoplot(forecast_cust))
```


```{r}
model_cust_simple = auto.arima(combined_clean$cust_168[10000:1400], D = 1)
```

```{r}
forecast_cust_simple = forecast(model_cust_simple, h = 1000)
(autoplot(forecast_cust_simple))
```

```{r}
model_others_simple = auto.arima(combined_clean$others_168[10000:1400])
```

```{r}
forecast_others_simple = forecast(model_others_simple, h = 1000)
(autoplot(forecast_cust_simple))
```





```{r}
test <- msts(combined_clean$others_168[1:15912], seasonal.periods=c(24,168), )
test.fit <- tbats(test)
(plot(forecast(test.fit, h = 2000)))
```

